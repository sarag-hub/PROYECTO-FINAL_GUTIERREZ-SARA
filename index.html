<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Plataforma de Rehabilitaci√≥n F√≠sica</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <!-- Navbar fijo arriba -->
  <nav class="navbar">
    <div class="navbar-brand">üè• Rehabilitaci√≥n F√≠sica</div>
    <div class="navbar-links">
        <a id="navInicio" href="index.html">Inicio</a>
        <a id="navUsuarios" href="usuarios-editar.html">Gestionar Usuarios</a>
        <a id="navPacientes" href="pacientes-editar.html">Editar Pacientes</a>
        <a id="navCerrar" href="login.html">Cerrar Sesi√≥n</a>
    </div>
  </nav>


  <!-- Encabezado -->
  <header>
    <h1>Bienvenido a la Plataforma de Rehabilitaci√≥n F√≠sica</h1>
    <p>Consulta y gestiona usuarios, pacientes y ejercicios</p>
  </header>

  <!-- üîπ Secci√≥n informativa solo para pacientes -->
  <section id="infoRehabilitacion" style="display:none; margin-top:40px; padding:20px; background:#f1f8e9; border-radius:10px;">
  <div style="display:flex; flex-wrap:wrap; align-items:center; gap:30px;">
    <!-- üü© Texto + t√≠tulo -->
    <div style="flex:1; min-width:250px;">
      <h2 style="margin-bottom:15px;">La importancia de la rehabilitaci√≥n f√≠sica</h2>
      <p>
        La rehabilitaci√≥n es fundamental para recuperar movilidad, fuerza y calidad de vida despu√©s de una lesi√≥n o enfermedad.
        A trav√©s de ejercicios guiados y constancia, los pacientes pueden mejorar su independencia, prevenir complicaciones y acelerar su recuperaci√≥n.
      </p>
      <p>
        Recuerda que tu esfuerzo diario es clave para lograr un progreso sostenido. ¬°Cada ejercicio cuenta!
      </p>
    </div>

    <!-- üñº Imagen -->
    <div style="flex:1; min-width:250px;">
      <img src="imagen.jpg" alt="Paciente en rehabilitaci√≥n" style="width:100%; border-radius:10px;">
    </div>
  </div>
  </section>




  <!-- Botones distribuidos en dos filas -->
  <main>
    <div class="botonera-grid">
        <button id="btnUsuarios" class="btn btn-icon" onclick="location.href='usuarios.html'">üë§ Usuarios</button>
        <button id="btnPacientes" class="btn btn-icon" onclick="location.href='pacientes.html'">üßë‚Äç‚öïÔ∏è Pacientes</button>
        <button id="btnEjercicios" class="btn btn-icon" onclick="location.href='ejercicios.html'">üí™ Ejercicios</button>
        <button id="btnRegistro" class="btn btn-icon" onclick="location.href='registro.html'">üìã Registro</button>
    </div>

  </main>
  <!-- Footer -->
  <footer>
    <p>Sara Guti√©rrez Hern√°ndez ¬© 2025 Plataforma de Rehabilitaci√≥n F√≠sica</p>
  </footer>
</body>

<script>
  async function cargarRol() {
    try {
      // Pedimos al backend la sesi√≥n actual
      const res = await fetch('/session');
      const data = await res.json();

      if (!data.success) {
        // Si no hay sesi√≥n, ocultamos todo
        document.querySelectorAll('.btn-icon').forEach(btn => btn.style.display = 'none');
        return;
      }

      const rol = data.usuario.rol;

      // Ocultar todos primero
      document.querySelectorAll('.btn-icon').forEach(btn => btn.style.display = 'none');

      // Mostrar seg√∫n rol
      if (rol === 'admin') {
        document.getElementById('btnUsuarios').style.display = 'block';
        document.getElementById('btnPacientes').style.display = 'block';
        document.getElementById('btnEjercicios').style.display = 'block';
        document.getElementById('btnRegistro').style.display = 'block';
      } else if (rol === 'fisioterapeuta') {
        document.getElementById('btnPacientes').style.display = 'block';
        document.getElementById('btnEjercicios').style.display = 'block'; // üîë nuevo
        document.getElementById('btnRegistro').style.display = 'block';
      } else if (rol === 'paciente') {
        document.getElementById('btnEjercicios').style.display = 'block';
        document.getElementById('btnRegistro').style.display = 'block';
      }
    } catch (err) {
      console.error('Error al cargar rol:', err);
    }
  }

  // Ejecutar al cargar la p√°gina
  cargarRol();
</script>


<script>
  async function configurarNavbar() {
    try {
      const res = await fetch('/session');
      const data = await res.json();

      if (!data.success) {
        // Si no hay sesi√≥n, ocultamos todo menos Inicio y Cerrar Sesi√≥n
        document.getElementById('navUsuarios').style.display = 'none';
        document.getElementById('navPacientes').style.display = 'none';
        return;
      }

      const rol = data.usuario.rol;

      // Ocultar todo primero
      document.getElementById('navUsuarios').style.display = 'none';
      document.getElementById('navPacientes').style.display = 'none';

      // Mostrar seg√∫n rol
      if (rol === 'admin') {
        document.getElementById('navUsuarios').style.display = 'inline-block';
        document.getElementById('navPacientes').style.display = 'inline-block';
      } else if (rol === 'fisioterapeuta') {
        document.getElementById('navPacientes').style.display = 'inline-block';
      } 
      // Paciente solo ve Inicio y Cerrar Sesi√≥n
    } catch (err) {
      console.error('Error al configurar navbar:', err);
    }
  }

  configurarNavbar();
</script>

<script>
  async function configurarVista() {
    try {
      const res = await fetch('/session');
      const data = await res.json();

      if (!data.success) {
        // Ocultar todo si no hay sesi√≥n
        document.getElementById('infoRehabilitacion').style.display = 'none';
        return;
      }

      const rol = data.usuario.rol;

      // Mostrar secci√≥n solo si es paciente
      if (rol === 'paciente') {
        document.getElementById('infoRehabilitacion').style.display = 'block';
      } else {
        document.getElementById('infoRehabilitacion').style.display = 'none';
      }
    } catch (err) {
      console.error('Error al configurar vista:', err);
    }
  }

  configurarVista();
</script>



</html>
